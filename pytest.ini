[pytest]
# Pytest configuration for BMAD Portfolio Management System

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Directories to search for tests
testpaths = tests

# Add project root to Python path
pythonpath = .

# Markers (defined in conftest.py)
markers =
    unit: Unit tests (fast, isolated)
    integration: Integration tests (multi-component)
    system: System tests (end-to-end)
    slow: Slow tests (>1 second)
    critical: Critical component tests (must have 100% coverage)

# Coverage settings
addopts =
    --verbose
    --strict-markers
    --tb=short
    --cov=src
    --cov-report=term-missing
    --cov-report=html:coverage_html
    --cov-report=xml
    --cov-fail-under=93
    -ra

# Coverage exclusions
[coverage:run]
omit =
    tests/*
    */__pycache__/*
    */venv/*
    */.venv/*
    setup.py

[coverage:report]
exclude_lines =
    # Don't require coverage for defensive programming
    pragma: no cover

    # Don't require coverage for debug code
    def __repr__

    # Don't require coverage for abstract methods
    raise NotImplementedError

    # Don't require coverage for type checking blocks
    if TYPE_CHECKING:

    # Don't require coverage for main entry points
    if __name__ == .__main__.:

precision = 2
show_missing = True

[coverage:html]
directory = coverage_html
